$.fn.prayerTimes=function(t={}){const i=this,e=["الفجر","الشروق","الظهر","العصر","الغروب","المغرب","العشاء","الإمساك","منتصف الليل"],n={method:void 0===t.method?4:t.method,school:void 0===t.school?0:t.school,city:t.city||null,country:t.country||null,imsak:void 0===t.imsak||t.imsak,sunrise:void 0===t.sunrise||t.sunrise,sunset:void 0===t.sunset||t.sunset,midnight:void 0===t.midnight||t.midnight,arabic:void 0!==t.arabic&&t.arabic,militaryTime:void 0===t.militaryTime||t.militaryTime,outputEl:t.outputEl||"table"};function o({city:t,country:e}){const o=`https://api.aladhan.com/v1/timingsByCity?midnightMode=1&method=${n.method}&school=${n.school}&city=${t}&country=${e}`,r=JSON.parse(localStorage.getItem("jquery-prayer-times"));function u(){$.get(o,t=>{localStorage.setItem("jquery-prayer-times",JSON.stringify({lastQueries:o,value:t,timestamp:a()})),i.html(s(t.data.timings))})}r?function(t){const i=new Date(...a().split("/")),e=new Date(...t.split("/"));return Math.round((i-e)/864e5/365)}(r.timestamp)>0||o!==r.lastQueries?(u(),console.log("New day or queries!")):(console.log("Same day & queries!"),i.html(s(r.value.data.timings))):(u(),console.log("First time!"))}function s(t){const i="table"===n.outputEl?"table":"ul",o=!!n.arabic,s=!n.militaryTime,a=(t,i)=>o?e[i]:t,r=t=>s?function(t){const i=t.split(":"),e=+i[0],n=e<12||24===e?"AM":"PM";return`${`${e%12||12}`.padStart(2,"0")}:${i[1]} ${n}`}(t):t;let u=0,c=`<${i}>`;for(const e in t){const o=a(e,u),s=r(t[e]);n.imsak||"Imsak"!==e?(n.sunrise||"Sunrise"!==e)&&(n.sunset||"Sunset"!==e)&&(n.midnight||"Midnight"!==e)?(c+=`${"table"===i?`<tr tabindex="0"><td>${o}</td><td>${s}</td></tr>`:`<li tabindex="0"><span>${o}</span><span>${s}</span></li>`}`,u++):u++:u++}return c+=`</${i}>`}function a(t=new Date){return`${String(t.getDate()).padStart(2,"0")}/${String(t.getMonth()+1).padStart(2,"0")}/${t.getFullYear()}`}n.city&&n.country?o({city:n.city,country:n.country}):$.get("https://ipinfo.io/json",t=>{o({city:t.city,country:t.country})})};